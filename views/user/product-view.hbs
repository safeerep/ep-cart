<div class="container p-5 mt-5">
  <div class="row">
    {{#if certainProduct}}
      <div class="col-sm-12 col-md-6 col-lg-4">
        <div id="mainImageContainer" class="product-cover col-sm-12" style="border-right: 1px solid black;">
          <img
            src="{{certainProduct.images.[0]}}"
            id="mainImage"
            alt="Cover Image"
            class="img-fluid"
          />
        </div>
        <div class="row">
          {{#each certainProduct.images}}
            <div
              class="product-images col-2 col-sm-4 mt-4 d-flex"
              onclick="changeSrc('{{this}}')"
            >
              <img
                src="{{this}}"
                alt="Product Image 2"
                class="img-thumbnail"
              />
            </div>
          {{/each}}
        </div>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-6">

        <div class="product-info icons">
          <h2>{{certainProduct.BrandName}}</h2>
          {{!-- starting --}}
          <div class="d-flex align-items-center my-4">
            {{#each stars}}
              {{#if this}}
                <i class="fas fa-star fa-lg text-warning me-1"></i>
              {{else}}
                <i class="fa-regular fa-star fa-lg me-1"></i>
              {{/if}}
            {{/each}}
          </div>
          {{!-- ending --}}

          
          <div>Price
            {{#if offerPrice}}
            <dt class="text-decoration-line-through">{{certainProduct.BasePrice}}</dt>
            <dt>{{certainProduct.SellingPrice}}/-</dt>
            {{else}}
            <dt>{{certainProduct.SellingPrice}}/-</dt>
            {{/if}}
          </div>
          <p>{{certainProduct.Description}}</p>
        </div>

        {{#if availability}}
        <h4>Sizes available</h4>
        <div class=" col-2 col-sm-2 ">
          <form action="/cart/{{certainProduct._id}}" class="d-flex gap-3" method="post">
          {{#each sizesAvailable}}
          <label class="containerforsize">
            <input type="radio" name="size" checked value="{{this}}" />
            <span class="sizeselected btn size-btn border btn-lg">{{this}}</span>
          </label>
          {{/each}}
        </div>
        {{else}}
            <h3 class="btn border-danger m-2 text-danger btn-lg">out of stock</h3><br>
        {{/if}}
        <div class="m-3">
          <p
            id="addedToWishlistMessage_{{certainProduct._id}}"
            class="text-success fw-bold"
            data-product-id="{{certainProduct._id}}"
            style="display: none;"
          >
            added to wishlist
          </p>
        </div>
        <a id="addToWishlist_{{certainProduct._id}}" data-product-id="{{certainProduct._id}}" class="btn btn-white border btn-lg btn-block m-2 col-sm-6"><i
            class="fa-regular fa-heart"
          ></i>
          Add to Wishlist</a>
        {{#if availability}}  
        <button type="submit" class="btn btn-danger btn-lg btn-block m-2 col-sm-6">
          <i class="fas text-white fa-shopping-cart"></i>Add to Cart</button>
        {{/if}}
        </form>

      </div>
      <div class="col-sm-8 mt-5">
        <div class="text-center">
          <h3>Product Specification</h3>
        </div>
        <div class="d-flex justify-content-between mt-3">
          <div>
            <dt>{{certainProduct.Specification1}}</dt><br />
            <dt>{{certainProduct.Specification2}}</dt><br />
          </div>
          <div>
            <dt>{{certainProduct.Specification3}}</dt><br />
            <dt>{{certainProduct.Specification4}}</dt><br />
          </div>
        </div>
      </div>
      
      <div class="col-sm-12 mt-4">
        {{#if reviews}}
        <div class="text-center icons">
          <h3>Reviews</h3>
        </div>
        {{/if}}
          {{#if accessToWriteReview}}
          <div class="col-sm-12 col-md-8  mb-3" id="ratings-and-reviews">
            
            <div class="card border" >
              <h4 class="p-2">Rate this product & Write a review</h4>
                <div class="d-flex align-items-center p-2">
                  {{#if currentUserStars.[0]}}
                  <i class="fas fa-star fa-lg text-warning me-1 star" 
                  data-product-id="{{certainProduct._id}}" 
                  data-star-number="1"
                  id="star1"></i>
                  {{else}}
                  <i class="fa-regular fa-star fa-lg mx-1 star" 
                  data-product-id="{{certainProduct._id}}" 
                  data-star-number="1"
                  id="star1"></i>
                  {{/if}}
                  {{#if currentUserStars.[1]}}
                  <i class="fas fa-star fa-lg text-warning me-1 star" 
                  data-product-id="{{certainProduct._id}}" 
                  data-star-number="2" 
                  id="star2"></i>
                  {{else}}
                  <i class="fa-regular fa-star fa-lg star" 
                  data-product-id="{{certainProduct._id}}" 
                  data-star-number="2" 
                  id="star2"></i>
                  {{/if}}
                  {{#if currentUserStars.[2]}}
                  <i class="fas fa-star fa-lg text-warning me-1 star" 
                  data-product-id="{{certainProduct._id}}" 
                  data-star-number="3" 
                  id="star3"></i>
                  {{else}}
                  <i class="fa-regular fa-star fa-lg mx-1 star" 
                  data-product-id="{{certainProduct._id}}" 
                  data-star-number="3" 
                  id="star3"></i>
                  {{/if}}
                  {{#if currentUserStars.[3]}}
                  <i class="fas fa-star fa-lg text-warning me-1 star" 
                  data-product-id="{{certainProduct._id}}" 
                  data-star-number="4" 
                  id="star4"></i>
                  {{else}}
                  <i class="fa-regular fa-star fa-lg star" 
                  data-product-id="{{certainProduct._id}}" 
                  data-star-number="4" 
                  id="star4"></i>
                  {{/if}}
                  {{#if currentUserStars.[4]}}
                  <i class="fas fa-star fa-lg text-warning me-1 star" 
                  data-product-id="{{certainProduct._id}}" 
                  data-star-number="5" 
                  id="star5"></i>
                  {{else}}
                  <i class="fa-regular fa-star fa-lg mx-1 star" 
                  data-product-id="{{certainProduct._id}}" 
                  data-star-number="5" 
                  id="star5"></i>
                  {{/if}}
                </div>
              <div class="card-body">
                <h6 class="d-none text-success" id="thanksforrating">Thanks for the rating!</h6>
                <form id="reviewComment">
                  <label for="review" class="mb-3 col-md-12">
                    <input
                      name="Comment"
                      type="text"
                      class="form-control"
                      style="border: none; border-bottom: 1px solid #352F44; border-radius: 0; width: 100%;"
                      id="comment"
                      placeholder="write here"
                    />
                  </label>
                  <input type="text" value="{{certainProduct._id}}" name="ProductId" hidden>
                  <button>post comment</button>
                </form>
              </div>
            </div>
          </div>
          {{/if}}
        <div id="commentsContainer" class="row">
        {{#each reviews}}
          <div class="col-sm-12 col-md-6 mb-3">
            <div class="card">
              
              <div class="card-body">
                <p class="card-text"><strong>{{user}}</strong></p>
                <p class="card-text">{{review}}</p>

              </div>
            </div>
          </div>
        {{/each}}
        </div>
      </div>
      </div>
      </div>
      
      </div>
    {{/if}}
  </div>
</div>


